## 函数组件下实现方式

### 1. useRef + useImperativeHandle + forwardRef(官方推荐)

子组件
```javascript
import { useImperativeHandle, forwardRef } from "react";
const Child = (_, ref) => {
  useImperativeHandle(ref, () => ({
    childFunc: () => {
      console.log('child方法')
    },
  }))
  return null;
};
export default forwardRef(Child);
```

父组件
```javascript
import { useRef } from 'react';
import Child from './Child';
const Parent = () => {
  const childRef = useRef();
  const onBtnClick = () => {
    childRef.current.childFunc();
  };
  return (
    <div>
      <button onClick={onBtnClick}>触发子组件方法</button>
      <Child ref={childRef} />
    </div>
  );
};
export default Parent;
```
### 2. useRef + useImperativeHandle

子组件
```javascript
import { useImperativeHandle } from 'react';

const Child = ({ compRef }) => {
  useImperativeHandle(compRef, () => ({
    childFunc: () => {
      console.log('child方法');
    },
  }));
  return null;
};
export default Child;
```

父组件
```javascript
import Child from "./Child";
import { useRef } from 'react';

const Parent = () => {
  const childRef = useRef();
  const onBtnClick = () => {
    childRef.current.childFunc();
  };
  return (
    <div>
      <button onClick={onBtnClick}>触发子组件方法</button>
      <Child compRef={childRef} />
    </div>
  );
};
export default Parent;
```

## 类组件下实现方式 
### 1. React.createRef
子组件
```javascript
import { Component } from 'react';

class Child extends Component {
  childFunc = () => {
    console.log('child方法');
  };
  render() {
    return null;
  }
}
export default Child;
```

父组件
```javascript
import React, { Component } from 'react';
import Child from './Child';

class Parent extends Component {
  ref = React.createRef();

  onBtnClick = () => {
    this.ref.current.childFunc();
  };
  render() {
    return (
      <div>
        <button onClick={this.onBtnClick}>触发子组件方法</button>
        <Child ref={this.ref} />
      </div>
    );
  }
}
export default Parent;
```
### 2. props + 子组件生命周期(`componentDidMount` || `constructor`)
子组件
```javascript
import { Component } from 'react';

class Child extends Component {
  componentDidMount() {
    const { childFunc } = this;
    // 你甚至可以在onRef中传入this 将整个组件实例导出到父组件: this.props.onRef(this);
    this.props.onRef({
      childFunc
    });
  }

  childFunc = () => {
    console.log('child方法');
  };

  render() {
    return null;
  }
}
export default Child;
```

父组件
```javascript
import { Component } from 'react';
import Child from './Child';

class Parent extends Component {
  onBtnClick = () => {
    this.child.childFunc();
  };
  render() {
    return (
      <div>
        <button onClick={this.onBtnClick}>触发子组件方法</button>
        <Child onRef={(ref) => this.child = ref} />
      </div>
    );
  }
}
export default Parent;
```